# ---
# expeditor:
#   cached_folders:
#     - nate_test

steps:
    # WORKS!
    # - label: system directory test
    #   expeditor:
    #     cached_folders:
    #       - /usr/bin
    #   agents:
    #     queue: default
    #   timeout_in_minutes: 2

    - label: "label#$n :ruby: name[]_+test"
      plugins:
      - chef/cache#bd65b5275d780f6e3b70c93bad80ea2a7a0ff585:
          s3_bucket: "core-buildkite-cache-chef-canary-canary"
          cached_folders:
          - "vendor/"
      expeditor:
        executor:
          docker:
            privileged: true
      commands: 
        - bundle install --path ./vendor
        - ls -al ./vendor/ruby/2.6.0/gems/
      timeout_in_minutes: 2

    # - label: knockout test
    #   expeditor:
    #     cached_folders:
    #       - "!nate_test"
    #   agents:
    #     queue: default
    #   timeout_in_minutes: 2

    # - label: global and step test
    #   expeditor:
    #     cached_folders:
    #       - nate_test/
    #   agents:
    #     queue: default
    #   timeout_in_minutes: 2

    # - label: "./test"
    #   expeditor:
    #     cached_folders:
    #       - "!nate_test"
    #       - ./nate_test
    #   agents:
    #     queue: default
    #   timeout_in_minutes: 2